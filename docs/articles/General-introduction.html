<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="precmed">
<title>A general introduction  
Vignette 1 of 5
 â€¢ precmed</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A general introduction  
Vignette 1 of 5
">
<meta property="og:description" content="precmed">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">precmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/General-introduction.html">A general introduction  
Vignette 1 of 5
</a>
    <a class="dropdown-item" href="../articles/Count-examples.html">Examples for count outcome  
Vignette 2 of 5
</a>
    <a class="dropdown-item" href="../articles/Survival-examples.html">Examples for survival outcome  
Vignette 3 of 5
</a>
    <a class="dropdown-item" href="../articles/Additional-examples.html">Additional examples  
Vignette 4 of 5
</a>
    <a class="dropdown-item" href="../articles/Theoretical-details.html">Theoretical details  
Vignette 5 of 5
</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>A general introduction  
Vignette 1 of 5
</h1>
            
            <h4 data-toc-skip class="date">October 21, 2022</h4>
      
      
      <div class="d-none name"><code>General-introduction.Rmd</code></div>
    </div>

    
    
<!-- badges: start -->
<p><a href="https://cran.r-project.org/package=precmed" class="external-link"><img src="https://www.r-pkg.org/badges/version/precmed" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=precmed" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/last-month/precmed" alt="metacran downloads"></a> <!-- badges: end --></p>
<img src="sticker4.jpg" alt="logo" style="position:absolute; top:0; right:10px; padding:0px;" width="300px" heigth="300px"><h1>
precmed: Precision Medicine in R
</h1>
<p>A doubly robust precision medicine approach to estimate and validate
conditional average treatment effects</p>
<div class="section level2">
<h2 id="general-introduction">General introduction<a class="anchor" aria-label="anchor" href="#general-introduction"></a>
</h2>
<p><strong>precmed</strong> was developed to help researchers with
precision medicine. In precision medicine, we want to determine the
optimal treatment for each patient instead of applying one treatment to
all patients because not all patients respond to treatments in the same
way. This is also called <em>treatment effect heterogeneity</em> in
which different subgroups of patients respond differently to the same
treatment. <strong>precmed</strong> can help to estimate and internally
validate these different treatment effects, also called the conditional
average treatment effects (CATEs) which describe how different subgroups
respond to the same treatment. Users of the package can estimate these
effects (CATEs) between two treatments (e.g., treatment A or treatment
B) from either randomized controlled trials (RCTs) or real world data
(RWD).</p>
<div class="section level3">
<h3 id="capabilities-of-precmed-package">Capabilities of <code>precmed</code> package<a class="anchor" aria-label="anchor" href="#capabilities-of-precmed-package"></a>
</h3>
<p>The <code>precmed</code> package contains functions to</p>
<ul>
<li>Estimate average treatment effects for count, survival and contiuous
data</li>
<li>Estimate conditional average treatment effect (CATE) score for count
and survival</li>
<li>Cross-validation of CATE score</li>
<li>Compute area between curves</li>
<li>Plot validation curves</li>
</ul>
<p>The CATEs can be estimated using various scoring methods depending on
the type of outcome. Currently, <strong>precmed</strong> supports count
and survival outcome:<br>
- Example count outcome: When the outcome is the number of relapses (0,
1, 2, 3) and we want to estimate if drug0 or drug1 is preferred for
patients.<br>
- Example survival outcome: When the outcome is the time (days) to first
relapse (or censoring).</p>
<p>Using the <code><a href="../reference/catecv.html">catecv()</a></code> function, these treatment effects can
be estimated using different scoring methods like <code>boosting</code>,
<code>poisson</code>, and <code>randomForest</code> (survival outcomes
only). The function will internally evaluate the performance of these
different scoring methods with repeated cross-validation (CV).</p>
</div>
<div class="section level3">
<h3 id="user-input">User input<a class="anchor" aria-label="anchor" href="#user-input"></a>
</h3>
<p>The user has to (atleast) input:<br>
- response: type of outcome/response (either <code>count</code> or
<code>survival</code>)<br>
- data: a data frame with patient data<br>
- score.method: select which methods are used to estimate the CATE
(e.g., <code>boosting</code>, <code>poisson</code>, <code>twoReg</code>,
<code>contrastReg</code>)<br>
- cate.model: a formula describing the outcome model (outcome ~ age +
gender + previous_treatment)<br>
The outcome of interest is located on the left, and the covariates on
the right.<br>
- ps.model: a formula describing the propensity score model (treatment ~
age + previous_treatment)<br>
To correct for confounding, the propensity score is calculated. The
treatment is located on the left (e.g., drug0 or drug1, treatment must
be coded as 0 or 1) and all variables that can influence treatment
allocation are located on the right (e.g, age and previous treatment
might influence if patients receive drug0 or drug1).</p>
</div>
<div class="section level3">
<h3 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h3>
<p>The outcome of the <code><a href="../reference/catecv.html">catecv()</a></code> function can be validated
using 3 built-in validation metrics to internally evaluate the
performance of different scoring methods:</p>
<ul>
<li><p>area between curves (ABC): <code>abc(x)</code><br>
The ABC is a metric to help users select the best scoring method in
terms of capturing treatment effect heterogeneity in the data. It is
calculated for each scoring method separately. Higher ABC values are
preferable as they indicate that more treatment effect heterogeneity is
captured by the scoring method.</p></li>
<li><p>validation curves: <code>plot(x)</code><br>
Two side-by-side plots are generated, visualizing the estimated average
treatment effects in a series of nested subgroups. On the left side the
curve is shown for the training set, and on the right side the curve is
shown for the validation set. Each line in the plots represents one
scoring method (e.g., <code>boosting</code>, <code>randomForest</code>)
specified under score.method.</p></li>
<li><p>box plots: <code>boxplot(x)</code><br>
Provides box plots which depict distributions of estimated ATEs for each
multi-category subgroup in the validation set across all
cross-validation iterations. The subgroups are mutually exclusive and
are categorized by the CATE score percentiles <code>prop.multi</code>
specified in <code><a href="../reference/catecv.html">catecv()</a></code>.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="how-to-install">How to install?<a class="anchor" aria-label="anchor" href="#how-to-install"></a>
</h3>
<p>The <code>precmed</code> package can be installed from CRAN as
follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"precmed"</span><span class="op">)</span></span></code></pre></div>
<p>The latest version can be installed from GitHub as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"smartdata-analysis-and-statistics/precmed"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="main-functions">Main functions<a class="anchor" aria-label="anchor" href="#main-functions"></a>
</h3>
<p>The main functions in the <code>precmed</code> package are:</p>
<table class="table">
<colgroup>
<col width="36%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>Function name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>catecv()</td>
<td>Cross-validation of the conditional average treatment effect (CATE)
score for count, survival or continuous outcomes</td>
</tr>
<tr class="even">
<td>catefit()</td>
<td>Estimation of the conditional average treatment effect (CATE) score
for count, survival and continuous data</td>
</tr>
<tr class="odd">
<td>atefit()</td>
<td>Doubly robust estimator of and inference for the average treatment
effect for count, survival and continuous data</td>
</tr>
<tr class="even">
<td>Validation functions:</td>
<td></td>
</tr>
<tr class="odd">
<td>abc()</td>
<td>Compute the area between curves from the <code>precmed</code>
object</td>
</tr>
<tr class="even">
<td>plot()</td>
<td>Two side-by-side line plots of validation curves from the
<code>precmed</code> object</td>
</tr>
<tr class="odd">
<td>boxplot()</td>
<td>A set of box plots of estimated ATEs from the <code>precmed</code>
object</td>
</tr>
</tbody>
</table>
<p>The main functions of the package are: <code><a href="../reference/catecv.html">catecv()</a></code>,
<code><a href="../reference/catefit.html">catefit()</a></code>, <code><a href="../reference/atefit.html">atefit()</a></code>, <code><a href="../reference/abc.html">abc()</a></code>,
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, and <code><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot()</a></code>. The recommended
workflow of analyses to identify treatment effect heterogeneity with
several candidate scoring methods follows the steps below:</p>
<ol style="list-style-type: decimal">
<li><p>Compare up to 5 methods to construct the CATE score via internal
validation (function <code><a href="../reference/catecv.html">catecv()</a></code>).</p></li>
<li>
<p>Select the best method using 3 metrics:</p>
<p>2.1 Compare the ABC across methods (function <code><a href="../reference/abc.html">abc()</a></code>).</p>
<p>2.2 Compare the steepness of the validation curves in the validation
samples across methods (function <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>).</p>
<p>2.3 Compare the distribution of the ATE in mutually exclusive
subgroups in the validation samples (function
<code><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot()</a></code>).</p>
</li>
<li><p>For the selected method, estimate the CATE score in the entire
data or, ideally, in an external data set (function
<code><a href="../reference/catefit.html">catefit()</a></code>). Steps 1 &amp; 2 can be skipped if comparing and
selecting methods are not of interest.</p></li>
<li><p>Optional. Use <code><a href="../reference/atefit.html">atefit()</a></code> to estimate ATE between 2
treatment groups with a doubly robust estimator and estimate the
variability of the ATE with a bootstrap approach.</p></li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="other-precmed-vignettes-in-this-serie">Other <code>precmed</code> vignettes in this serie<a class="anchor" aria-label="anchor" href="#other-precmed-vignettes-in-this-serie"></a>
</h2>
<p><a href="General-introduction.html">1. General introduction</a><br><a href="Count-examples.html">2. Examples for count outcome</a><br><a href="Survival-examples.html">3. Examples for survival
outcome</a><br><a href="Additional-examples.html">4. Additional examples</a><br><a href="Theoretical-details.html">5. Theoretical details</a></p>
</div>
<div class="section level2">
<h2 id="abbreviations">Abbreviations<a class="anchor" aria-label="anchor" href="#abbreviations"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th align="left">Abbreviation</th>
<th align="left">Full Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABC</td>
<td align="left">Area between curves</td>
</tr>
<tr class="even">
<td align="left">ATE</td>
<td align="left">Average treatment effect</td>
</tr>
<tr class="odd">
<td align="left">CATE</td>
<td align="left">Conditional average treatment effect</td>
</tr>
<tr class="even">
<td align="left">contrastReg</td>
<td align="left">Contrast regression</td>
</tr>
<tr class="odd">
<td align="left">CV</td>
<td align="left">Cross-validation</td>
</tr>
<tr class="even">
<td align="left">GAM</td>
<td align="left">Generalized additive model</td>
</tr>
<tr class="odd">
<td align="left">GBM</td>
<td align="left">Gradient boosting machine</td>
</tr>
<tr class="even">
<td align="left">IPCW</td>
<td align="left">Inverse probability of censoring weights</td>
</tr>
<tr class="odd">
<td align="left">PM</td>
<td align="left">Precision medicine</td>
</tr>
<tr class="even">
<td align="left">PS</td>
<td align="left">Propensity score</td>
</tr>
<tr class="odd">
<td align="left">RCT</td>
<td align="left">Randomized controlled trial</td>
</tr>
<tr class="even">
<td align="left">RR</td>
<td align="left">Rate ratio</td>
</tr>
<tr class="odd">
<td align="left">twoReg</td>
<td align="left">Two regressions</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lu Tian, Xiaotong Jiang, Gabrielle Simoneau, Thomas Debray.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
