<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute the area between curves from the "precmed" object — abc.precmed • precmed</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute the area between curves from the " precmed object abc.precmed><meta name="description" content='Compute the area between curves (ABC) for each scoring method in the "precmed" object.
This should be run only after results of catecv() have been obtained.'><meta property="og:description" content='Compute the area between curves (ABC) for each scoring method in the "precmed" object.
This should be run only after results of catecv() have been obtained.'><meta property="og:image" content="https://smartdata-analysis-and-statistics.github.io/precmed/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">precmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/Count-examples.html">Example with count outcome</a></li>
    <li><a class="dropdown-item" href="../articles/Survival-examples.html">Example with survival outcome</a></li>
    <li><a class="dropdown-item" href="../articles/Additional-examples.html">Additional examples</a></li>
    <li><a class="dropdown-item" href="../articles/Theoretical-details.html">Theoretical details</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/smartdata-analysis-and-statistics/precmed"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute the area between curves from the <code>"precmed"</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/smartdata-analysis-and-statistics/precmed/blob/main/R/crossv.R" class="external-link"><code>R/crossv.R</code></a></small>
      <div class="d-none name"><code>abc.precmed.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute the area between curves (ABC) for each scoring method in the <code>"precmed"</code> object.
This should be run only after results of <code><a href="catecv.html">catecv</a>()</code> have been obtained.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'precmed'</span></span>
<span><span class="fu"><a href="abc.html">abc</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code>"precmed"</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments (currently unused).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a matrix of numeric values with number of columns equal to the number cross-validation
iteration and number of rows equal to the number of scoring methods in <code>x</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The ABC is the area between a validation curve and the overall ATE in the validation set.
It is calculated for each scoring method separately. Higher ABC values are preferable as they
indicate that more treatment effect heterogeneity is captured by the scoring method.
Negative values of ABC are possible if segments of the validation curve cross the overall ATE line.
The ABC is calculated with the <code><a href="auc.html">auc</a>()</code> in <code>utility.R</code> with a natural
cubic spline interpolation. The calculation of the ABC is always based on validation curves based on
100 proportions equally spaced from <code>min(prop.cutoff)</code> to <code>max(prop.cutoff)</code>.</p>
<p>The ABC is a metric to help users select the best scoring method in terms of capturing treatment
effect heterogeneity in the data. It should be used in complement to the visual inspection of
the validation curves in the validation set in <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a>()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Zhao, L., Tian, L., Cai, T., Claggett, B., &amp; Wei, L. J. (2013).
<em>Effectively selecting a target population for a future comparative study.
Journal of the American Statistical Association, 108(502), 527-539.</em></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="catecv.html">catecv</a>()</code> function and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a>()</code>, <code><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a>()</code> methods for
<code>"precmed"</code> objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Count outcome</span></span></span>
<span class="r-in"><span><span class="va">cv_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="catecv.html">catecv</a></span><span class="op">(</span>response <span class="op">=</span> <span class="st">"count"</span>,</span></span>
<span class="r-in"><span>                   data <span class="op">=</span> <span class="va">countExample</span>,</span></span>
<span class="r-in"><span>                   score.method <span class="op">=</span> <span class="st">"poisson"</span>,</span></span>
<span class="r-in"><span>                   cate.model <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">previous_treatment</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                                <span class="va">previous_cost</span> <span class="op">+</span> <span class="va">previous_number_relapses</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                                <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   ps.model <span class="op">=</span> <span class="va">trt</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">previous_treatment</span>,</span></span>
<span class="r-in"><span>                   higher.y <span class="op">=</span> <span class="cn">FALSE</span>, cv.n <span class="op">=</span> <span class="fl">5</span>, verbose <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Variable trt was recoded to 0/1 with drug0-&gt;0 and drug1-&gt;1.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cv = 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   splitting the data..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   training..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   validating..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cv = 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   splitting the data..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   training..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   validating..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cv = 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   splitting the data..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   training..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   validating..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cv = 4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   splitting the data..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   training..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   validating..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cv = 5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   splitting the data..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   training..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   validating..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total runtime : 14.48 secs </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ABC of the validation curves for each method and each CV iteration</span></span></span>
<span class="r-in"><span><span class="fu"><a href="abc.html">abc</a></span><span class="op">(</span><span class="va">cv_count</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               cv1        cv2         cv3       cv4        cv5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> poisson 0.1226217 0.05313313 0.001182887 0.2257895 0.03782023</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Survival outcome</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cv_surv</span> <span class="op">&lt;-</span> <span class="fu"><a href="catecv.html">catecv</a></span><span class="op">(</span>response <span class="op">=</span> <span class="st">"survival"</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">survivalExample</span>,</span></span>
<span class="r-in"><span>                  score.method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"poisson"</span>, <span class="st">"randomForest"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  cate.model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">d</span><span class="op">)</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">previous_cost</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                               <span class="va">previous_number_relapses</span>,</span></span>
<span class="r-in"><span>                  ps.model <span class="op">=</span> <span class="va">trt</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">previous_treatment</span>,</span></span>
<span class="r-in"><span>                  higher.y <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                  cv.n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No value supplied for tau0. Default sets tau0 to the maximum survival time.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Variable trt was recoded to 0/1 with drug0-&gt;0 and drug1-&gt;1.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ABC of the validation curves for each method and each CV iteration</span></span></span>
<span class="r-in"><span><span class="fu"><a href="abc.html">abc</a></span><span class="op">(</span><span class="va">cv_surv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    cv1       cv2       cv3       cv4       cv5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> poisson      0.1923841 0.1952059 0.1755373 0.1835761 0.1960739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> randomForest 0.1826734 0.1950689 0.1718407 0.1770140 0.1924507</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lu Tian, Xiaotong Jiang, Gabrielle Simoneau, Thomas Debray.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

