<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Doubly robust estimator of the average treatment effect between two
treatments, which is the rate ratio of treatment 1 over treatment 0 for
count outcomes. Bootstrap is used for inference."><title>Doubly robust estimator of and inference for the average treatment effect for
continuous data — atefitmean • precmed</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Doubly robust estimator of and inference for the average treatment effect for
continuous data — atefitmean"><meta property="og:description" content="Doubly robust estimator of the average treatment effect between two
treatments, which is the rate ratio of treatment 1 over treatment 0 for
count outcomes. Bootstrap is used for inference."><meta property="og:image" content="https://smartdata-analysis-and-statistics.github.io/precmed/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">precmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/precmed.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/Count-examples.html">Example with count outcome</a>
    <a class="dropdown-item" href="../articles/Survival-examples.html">Example with survival outcome</a>
    <a class="dropdown-item" href="../articles/Additional-examples.html">Additional examples</a>
    <a class="dropdown-item" href="../articles/Theoretical-details.html">Theoretical details</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/smartdata-analysis-and-statistics/precmed">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Doubly robust estimator of and inference for the average treatment effect for
continuous data</h1>
      <small class="dont-index">Source: <a href="https://github.com/smartdata-analysis-and-statistics/precmed/blob/HEAD/R/ATE_continuous.R" class="external-link"><code>R/ATE_continuous.R</code></a></small>
      <div class="d-none name"><code>atefitmean.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Doubly robust estimator of the average treatment effect between two
treatments, which is the rate ratio of treatment 1 over treatment 0 for
count outcomes. Bootstrap is used for inference.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">atefitmean</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">cate.model</span>,</span>
<span>  <span class="va">ps.model</span>,</span>
<span>  ps.method <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>  minPS <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  maxPS <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>  interactions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n.boot <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  plot.boot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame containing the variables in the outcome and
propensity score models; a data frame with <code>n</code> rows (1 row per
observation).</p></dd>


<dt>cate.model</dt>
<dd><p>A formula describing the outcome model to be fitted.
The outcome must appear on the left-hand side.</p></dd>


<dt>ps.model</dt>
<dd><p>A formula describing the propensity score model to be fitted.
The treatment must appear on the left-hand side. The treatment must be a
numeric vector coded as 0/1. If data are from a RCT, specify <code>ps.model</code>
as an intercept-only model.</p></dd>


<dt>ps.method</dt>
<dd><p>A character value for the method to estimate the propensity
score. Allowed values include one of: <code>'glm'</code> for logistic regression
with main effects only (default), or <code>'lasso'</code> for a logistic regression
with main effects and LASSO penalization on two-way interactions (added to
the model if interactions are not specified in <code>ps.model</code>). Relevant
only when <code>ps.model</code> has more than one variable.</p></dd>


<dt>minPS</dt>
<dd><p>A numerical value between 0 and 1 below which estimated
propensity scores should be truncated. Default is <code>0.01</code>.</p></dd>


<dt>maxPS</dt>
<dd><p>A numerical value between 0 and 1 above which estimated
propensity scores should be truncated. Must be strictly greater than
<code>minPS</code>. Default is <code>0.99</code>.</p></dd>


<dt>interactions</dt>
<dd><p>A logical value indicating whether the outcome model
should be fitted separately by treatment arm with the variables in
<code>cate.model</code>, which is equivalent to assuming treatment-covariate
interaction by all of the variables in <code>cate.model</code>. If <code>TRUE</code>, the
outcome model will be fitted separately by treatment arms only if at least
10 patients received each treatment option. Default is <code>TRUE</code>.</p></dd>


<dt>n.boot</dt>
<dd><p>A numeric value indicating the number of bootstrap samples
used. Default is <code>500</code>.</p></dd>


<dt>plot.boot</dt>
<dd><p>A logical value indicating whether histograms of the
bootstrapped treatment effect estimates should be produced at every
<code>n.boot/10</code>-th iteration and whether the final histogram should be
outputted. Default is <code>FALSE</code>.</p></dd>


<dt>seed</dt>
<dd><p>An optional integer specifying an initial randomization seed for
reproducibility. Default is <code>NULL</code>, corresponding to no seed.</p></dd>


<dt>verbose</dt>
<dd><p>An integer value indicating whether intermediate progress
messages and histograms should be printed. <code>1</code> indicates messages are
printed and <code>0</code> otherwise. Default is <code>0</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Return a list of 8 elements:</p><ul><li><p><code>log.rate.ratio</code>:  A numeric value of the estimated log rate ratio.</p></li>
<li><p><code>se.boot.log.rate.ratio</code>:  A numeric value of the bootstrap standard error of log rate ratio.</p></li>
<li><p><code>rate.ratio</code>:  A numeric value of the estimated rate ratio.</p></li>
<li><p><code>rate.ratio0</code>:  A numeric value of the estimated rate in the group trt=0.</p></li>
<li><p><code>rate.ratio1</code>:  A numeric value of the estimated rate in the group trt=1.</p></li>
<li><p><code>rate.ratio.CIl</code>:  A numeric value of the lower limit 95% bootstrap confidence interval
    for estimated rate ratio.</p></li>
<li><p><code>rate.ratio.CIu</code>:  A numeric value of the upper limit 95% bootstrap confidence interval
    for estimated rate ratio.</p></li>
<li><p><code>pvalue</code>:  A numeric value of the p-value derived from the bootstrapped values
    based on a Chi-squared distribution.</p></li>
<li><p><code>warning</code>:  A warning message produced if the treatment variable was not coded as 0/1. The key
  to map the original coding of the variable to a 0/1 key is displayed in the warning to facilitate the
  interpretation of the remaining of the output.</p></li>
<li><p><code>plot</code>:  If <code>plot.boot</code> is <code>TRUE</code>, a histogram displaying the distribution of the bootstrapped log rate ratios.
  The red vertical reference line in the histogram represents the estimated log rate ratio.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This helper function estimates the average treatment effect (ATE) between two
 treatment groups in a given dataset specified by <code>y, trt, x.cate, x.ps, time</code>. The ATE is
 estimated with a doubly robust estimator that accounts for imbalances in covariate distributions
 between the two treatment groups with inverse probability treatment weighting.
 For count outcomes, the estimated ATE is the estimated
 rate ratio between treatment 1 versus treatment 0. Both original and log-transformed ATEs are
 returned, as well as the rate in either treatment group.
 If <code>inference = TRUE</code>, the variability of the estimated rate ratio is also calculated
 using bootstrap. Additional variability outputs include standard error of the log rate ratio,
 95% confidence interval of the rate ratio, p-value, and a histogram of the log rate ratio.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This module is not implemented yet!</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lu Tian, Xiaotong Jiang, Gabrielle Simoneau, Thomas Debray.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

