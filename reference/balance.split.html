<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Split the given dataset into balanced training and validation sets (within a pre-specified tolerance) Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets 2) The covariate distributions are balanced between the training and validation sets — balance.split • precmed</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Split the given dataset into balanced training and validation sets (within a pre-specified tolerance) Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets 2) The covariate distributions are balanced between the training and validation sets — balance.split"><meta name="description" content="Split the given dataset into balanced training and validation sets
(within a pre-specified tolerance)
Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets
               2) The covariate distributions are balanced between the training and validation sets"><meta property="og:description" content="Split the given dataset into balanced training and validation sets
(within a pre-specified tolerance)
Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets
               2) The covariate distributions are balanced between the training and validation sets"><meta property="og:image" content="https://smartdata-analysis-and-statistics.github.io/precmed/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">precmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/Count-examples.html">Example with count outcome</a></li>
    <li><a class="dropdown-item" href="../articles/Survival-examples.html">Example with survival outcome</a></li>
    <li><a class="dropdown-item" href="../articles/Additional-examples.html">Additional examples</a></li>
    <li><a class="dropdown-item" href="../articles/Theoretical-details.html">Theoretical details</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/smartdata-analysis-and-statistics/precmed"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Split the given dataset into balanced training and validation sets (within a pre-specified tolerance) Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets 2) The covariate distributions are balanced between the training and validation sets</h1>
      <small class="dont-index">Source: <a href="https://github.com/smartdata-analysis-and-statistics/precmed/blob/v1.1.0/R/crossv.R" class="external-link"><code>R/crossv.R</code></a></small>
      <div class="d-none name"><code>balance.split.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Split the given dataset into balanced training and validation sets
(within a pre-specified tolerance)
Balanced means 1) The ratio of treated and controls is maintained in the training and validation sets
               2) The covariate distributions are balanced between the training and validation sets</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">balance.split</span><span class="op">(</span></span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">trt</span>,</span>
<span>  <span class="va">x.cate</span>,</span>
<span>  <span class="va">x.ps</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  minPS <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  maxPS <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>  train.prop <span class="op">=</span> <span class="fl">3</span><span class="op">/</span><span class="fl">4</span>,</span>
<span>  error.max <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  max.iter <span class="op">=</span> <span class="fl">5000</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Observed outcome; vector of size <code>n</code> (observations)</p></dd>


<dt id="arg-trt">trt<a class="anchor" aria-label="anchor" href="#arg-trt"></a></dt>
<dd><p>Treatment received; vector of size <code>n</code> with treatment coded as 0/1</p></dd>


<dt id="arg-x-cate">x.cate<a class="anchor" aria-label="anchor" href="#arg-x-cate"></a></dt>
<dd><p>Matrix of <code>p.cate</code> baseline covariates; dimension <code>n</code> by <code>p.cate</code>
(covariates in the outcome model)</p></dd>


<dt id="arg-x-ps">x.ps<a class="anchor" aria-label="anchor" href="#arg-x-ps"></a></dt>
<dd><p>Matrix of <code>p.ps</code> baseline covariates (plus a leading column of 1 for the intercept);
dimension <code>n</code> by <code>p.ps + 1</code> (covariates in the propensity score model plus intercept)</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Log-transformed person-years of follow-up; vector of size <code>n</code></p></dd>


<dt id="arg-minps">minPS<a class="anchor" aria-label="anchor" href="#arg-minps"></a></dt>
<dd><p>A numerical value (in `[0, 1]`) below which estimated propensity scores should be
truncated. Default is <code>0.01</code>.</p></dd>


<dt id="arg-maxps">maxPS<a class="anchor" aria-label="anchor" href="#arg-maxps"></a></dt>
<dd><p>A numerical value (in `(0, 1]`) above which estimated propensity scores should be
truncated. Must be strictly greater than <code>minPS</code>. Default is <code>0.99</code>.</p></dd>


<dt id="arg-train-prop">train.prop<a class="anchor" aria-label="anchor" href="#arg-train-prop"></a></dt>
<dd><p>A numerical value (in `(0, 1)`) indicating the proportion of total data used
for training. Default is <code>3/4</code>.</p></dd>


<dt id="arg-error-max">error.max<a class="anchor" aria-label="anchor" href="#arg-error-max"></a></dt>
<dd><p>A numerical value &gt; 0 indicating the tolerance (maximum value of error)
for the largest standardized absolute difference in the covariate distributions or in the
doubly robust estimated rate ratios between the training and validation sets. This is used
to define a balanced training-validation splitting. Default is <code>0.1</code>.</p></dd>


<dt id="arg-max-iter">max.iter<a class="anchor" aria-label="anchor" href="#arg-max-iter"></a></dt>
<dd><p>A positive integer value indicating the maximum number of iterations when
searching for a balanced training-validation split. Default is <code>5,000</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of 10 objects, 5 training and 5 validation of y, trt, x.cate, x.ps, time:
            y.train          - observed outcome in the training set; vector of size <code>m</code> (observations in the training set)
            trt.train        - treatment received in the training set; vector of size <code>m</code> coded as 0/1
            x.cate.train     - baseline covariates for the outcome model in the training set; matrix of dimension <code>m</code> by <code>p.cate</code>
            x.ps.train       - baseline covariates (plus intercept) for the propensity score model in the training set; matrix of dimension <code>m</code> by <code>p.ps + 1</code>
            time.train       - log-transformed person-years of follow-up in the training set; vector of size <code>m</code>
            y.valid          - observed outcome in the validation set; vector of size <code>n-m</code>
            trt.valid        - treatment received in the validation set; vector of size <code>n-m</code> coded as 0/1
            x.cate.valid     - baseline covariates for the outcome model in the validation set; matrix of dimension <code>n-m</code> by <code>p.cate</code>
            x.ps.valid       - baseline covariates (plus intercept) for the propensity score model in the validation set; matrix of dimension <code>n-m</code> by <code>p.ps + 1</code>
            time.valid       - log-transformed person-years of follow-up in the validation set; vector of size <code>n-m</code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lu Tian, Xiaotong Jiang, Gabrielle Simoneau, Thomas Debray.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

