<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="precmed">
<title>A general introduction • precmed</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A general introduction">
<meta property="og:description" content="precmed">
<meta property="og:image" content="https://smartdata-analysis-and-statistics.github.io/precmed/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">precmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/Count-examples.html">Example with count outcome</a>
    <a class="dropdown-item" href="../articles/Survival-examples.html">Example with survival outcome</a>
    <a class="dropdown-item" href="../articles/Additional-examples.html">Additional examples</a>
    <a class="dropdown-item" href="../articles/Theoretical-details.html">Theoretical details</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/smartdata-analysis-and-statistics/precmed">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A general introduction</h1>
            <h3 data-toc-skip class="subtitle">Vignette 1 of 5</h3>
            
            <h4 data-toc-skip class="date">November 25, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/smartdata-analysis-and-statistics/precmed/blob/HEAD/vignettes/precmed.Rmd" class="external-link"><code>vignettes/precmed.Rmd</code></a></small>
      <div class="d-none name"><code>precmed.Rmd</code></div>
    </div>

    
    
<!-- badges: start -->
<p><a href="https://cran.r-project.org/package=precmed" class="external-link"><img src="https://www.r-pkg.org/badges/version/precmed" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=precmed" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/last-month/precmed" alt="metacran downloads"></a> <!-- badges: end --></p>
<h1>
precmed: Precision Medicine in R
</h1>
<p>A doubly robust precision medicine approach to estimate and validate
conditional average treatment effects.</p>
<div class="section level2">
<h2 id="general-introduction">General introduction<a class="anchor" aria-label="anchor" href="#general-introduction"></a>
</h2>
<p><strong>precmed</strong> was developed to help researchers with the
implementation of precision medicine in R. A key objective of precision
medicine is to determine the optimal treatment separately for each
patient instead of applying a common treatment to all patients.
Personalizing treatment decisions becomes particularly relevant when
treatment response differs across patients, or when patients have
different preferences about benefits and harms. This package offers
statistical methods to develop and validate prediction models for
estimating individualized treatment effects. These treatment effects are
also known as the conditional average treatment effects (CATEs) and
describe how different subgroups of patients respond to the same
treatment. Presently, <strong>precmed</strong> focuses on the
personalization of two competitive treatments using randomized data from
a clinical trial <span class="citation">(<a href="#ref-zhao2013effectively" role="doc-biblioref">Zhao et al.
2013</a>)</span> or using real-world data (RWD) from a non-randomized
study <span class="citation">(<a href="#ref-yadlowsky2020estimation" role="doc-biblioref">Yadlowsky et al. 2020</a>)</span>.</p>
<div class="section level3">
<h3 id="how-to-install">How to install?<a class="anchor" aria-label="anchor" href="#how-to-install"></a>
</h3>
<p>The <code>precmed</code> package can be installed from CRAN as
follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"precmed"</span><span class="op">)</span></span></code></pre></div>
<p>The latest version can be installed from GitHub as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"smartdata-analysis-and-statistics/precmed"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="package-capabilities">Package capabilities<a class="anchor" aria-label="anchor" href="#package-capabilities"></a>
</h2>
<p>The <strong>precmed</strong> package contains functions to</p>
<ul>
<li>Estimate the average treatment effect (ATE) for count and survival
outcome data using <code><a href="../reference/atefit.html">atefit()</a></code>
</li>
<li>Estimate the conditional average treatment effect (CATE) using
<code><a href="../reference/catefit.html">catefit()</a></code>
</li>
<li>Development and Cross-validation of CATE using
<code><a href="../reference/catecv.html">catecv()</a></code>
</li>
<li>Plot the proportion of subjects with an estimated treatment effect
no less than <span class="math inline">\(c\)</span> over a range of
values for <span class="math inline">\(c\)</span> <span class="citation">(<a href="#ref-zhao2013effectively" role="doc-biblioref">Zhao et al. 2013</a>)</span>.</li>
<li>Compute the area between the average treatment difference curve of
competing models for the CATE using <code><a href="../reference/abc.html">abc()</a></code> <span class="citation">(<a href="#ref-zhao2013effectively" role="doc-biblioref">Zhao et al. 2013</a>)</span>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="recommended-workflow">Recommended workflow<a class="anchor" aria-label="anchor" href="#recommended-workflow"></a>
</h2>
<p>We recommend the following workflow to develop a model for estimating
the CATE in order to identify treatment effect heterogeneity:</p>
<ol style="list-style-type: decimal">
<li>Compare up to five modelling approaches (e.g., Poisson regression,
boosting) for estimating the CATE using cross-validation through
<code><a href="../reference/catecv.html">catecv()</a></code>.</li>
<li>Select the best modelling approach using 3 metrics:
<ul>
<li>Compare the steepness of the validation curves in the validation
samples across methods using <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. Two side-by-side plots
are generated, visualizing the estimated average treatment effects in a
series of nested subgroups. On the left side the curve is shown for the
training set, and on the right side the curve is shown for the
validation set. Each line in the plots represents one scoring method
(e.g., boosting, randomForest) specified under the argument
<code>score.method</code>.</li>
<li>The area between curves (ABC) using <code><a href="../reference/abc.html">abc()</a></code> quantifies a
model’s ability to capture treatment effect heterogeneity. Higher ABC
values are preferable as they indicate that more treatment effect
heterogeneity is captured by the scoring method.</li>
<li>Compare the distribution of the estimated ATE across different
levels of the CATE score percentiles using <code><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot()</a></code>.</li>
</ul>
</li>
<li>Apply the best modelling approach in the original data or in a new
external dataset using <code><a href="../reference/catefit.html">catefit()</a></code>.</li>
<li>Optional. Use <code><a href="../reference/atefit.html">atefit()</a></code> to estimate ATE between 2
treatment groups with a doubly robust estimator and estimate the
variability of the ATE with a bootstrap approach.</li>
</ol>
<p>In the vignettes, we will adopt a different workflow to gradually
expose the user from simple to more complex methods.</p>
<div class="section level3">
<h3 id="user-input">User input<a class="anchor" aria-label="anchor" href="#user-input"></a>
</h3>
<p>When applying <code><a href="../reference/catefit.html">catefit()</a></code> or <code><a href="../reference/catecv.html">catecv()</a></code>, the
user has to (at least) input:</p>
<ul>
<li>
<code>response</code>: type of outcome/response (either
<code>count</code> or <code>survival</code>)<br>
</li>
<li>
<code>data</code>: a data frame with individual patient data<br>
</li>
<li>
<code>score.method</code>: methods to estimate the CATE (e.g.,
<code>boosting</code>, <code>poisson</code>, <code>twoReg</code>,
<code>contrastReg</code>)<br>
</li>
<li>
<code>cate.model</code>: a formula describing the outcome model
(e.g., outcome ~ age + gender + previous_treatment)<br>
</li>
<li>
<code>ps.model</code>: a formula describing the propensity score
model to adjust for confounding (e.g., treatment ~ age +
previous_treatment)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="overview-of-the-vignettes">Overview of the vignettes<a class="anchor" aria-label="anchor" href="#overview-of-the-vignettes"></a>
</h2>
<p><a href="precmed.html">1. General introduction</a><br><a href="Count-examples.html">2. Examples for count outcome</a><br><a href="Survival-examples.html">3. Examples for survival
outcome</a><br><a href="Additional-examples.html">4. Additional examples</a><br><a href="Theoretical-details.html">5. Theoretical details</a></p>
</div>
<div class="section level2">
<h2 id="abbreviations">Abbreviations<a class="anchor" aria-label="anchor" href="#abbreviations"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th align="left">Abbreviation</th>
<th align="left">Full Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABC</td>
<td align="left">Area between curves</td>
</tr>
<tr class="even">
<td align="left">ATE</td>
<td align="left">Average treatment effect</td>
</tr>
<tr class="odd">
<td align="left">CATE</td>
<td align="left">Conditional average treatment effect</td>
</tr>
<tr class="even">
<td align="left">contrastReg</td>
<td align="left">Contrast regression</td>
</tr>
<tr class="odd">
<td align="left">CV</td>
<td align="left">Cross-validation</td>
</tr>
<tr class="even">
<td align="left">GAM</td>
<td align="left">Generalized additive model</td>
</tr>
<tr class="odd">
<td align="left">GBM</td>
<td align="left">Gradient boosting machine</td>
</tr>
<tr class="even">
<td align="left">IPCW</td>
<td align="left">Inverse probability of censoring weights</td>
</tr>
<tr class="odd">
<td align="left">PM</td>
<td align="left">Precision medicine</td>
</tr>
<tr class="even">
<td align="left">PS</td>
<td align="left">Propensity score</td>
</tr>
<tr class="odd">
<td align="left">RCT</td>
<td align="left">Randomized controlled trial</td>
</tr>
<tr class="even">
<td align="left">RR</td>
<td align="left">Rate ratio</td>
</tr>
<tr class="odd">
<td align="left">twoReg</td>
<td align="left">Two regressions</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-yadlowsky2020estimation" class="csl-entry">
Yadlowsky, Steve, Fabio Pellegrini, Federica Lionetto, Stefan Braune,
and Lu Tian. 2020. <span>“Estimation and Validation of Ratio-Based
Conditional Average Treatment Effects Using Observational Data.”</span>
<em>Journal of the American Statistical Association</em>, 1–18.
</div>
<div id="ref-zhao2013effectively" class="csl-entry">
Zhao, Lihui, Lu Tian, Tianxi Cai, Brian Claggett, and Lee-Jen Wei. 2013.
<span>“Effectively Selecting a Target Population for a Future
Comparative Study.”</span> <em>Journal of the American Statistical
Association</em> 108 (502): 527–39.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lu Tian, Xiaotong Jiang, Gabrielle Simoneau, Thomas Debray.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
